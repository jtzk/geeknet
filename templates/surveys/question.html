<!DOCTYPE html>
<html>
<head>
    <title>{{ survey.title }}</title>
</head>
<body>
<h1>{{ survey.title }}</h1>
{% if survey.owner == user or user.is_superuser %}
    <p><a href="{% url surveys.views.edit survey_id=survey.id %}">Edit this survey</a></p>
{% endif %}
<form action="{% url surveys.views.vote survey_id=survey.id %}" method="post">
    {% csrf_token %}
    {% if question %}
        <h3>Question {{ question.number }}:</h3>
        <p>{{ question.question }}</p>
        {% if question.type == question.TYPE_RADIO or question.type == question.TYPE_CHECKBOX %}
            {% for choice in question.choice_set.all %}
                <input type="{% if question.type == question.TYPE_RADIO %}radio{% elif question.type == question.TYPE_CHECKBOX %}checkbox{% endif %}" name="question-{{ question.id }}" id="choice{{ choice.id }}" value="{{ choice.id }}" />
                <label for="choice{{ choice.id }}">{{ choice.choice }}</label><br />
            {% endfor %}
        {% elif question.type == question.TYPE_TEXTBOX %}
            <input type="text" name="question-{{ question.id }}" value="" /><br />

        {% elif question.type == question.TYPE_TEXTAREA %}
            <textarea style="width:400px;height:200px" name="question-{{ question.id }}"></textarea><br />
        {% endif %}
        {% if question.next %}<input type="hidden" name="nextquestion" value="{{ question.next.id }}" />{% endif %}
        <input type="submit" value="Vote" />
        {% if question.prev or question.next %}
            <p>
                {% if question.prev %}<a href="{% url surveys.views.question survey_id=survey.id question_id=question.prev.id %}">previous</a>{% endif %}
                {% if question.next %}<a href="{% url surveys.views.question survey_id=survey.id question_id=question.next.id %}">next</a>{% endif %}
            </p>
        {% endif %}
    {% else %}
        <p>There are no questions in this survey yet.</p>
    {% endif %}
</form>
</body>
</html>